const fs = require('fs');
const path = require('path');

// ูุฑุงุกุฉ ุจูุงูุงุช ุงูููุชุฌุงุช
const productsPath = path.join(__dirname, '../data/products.json');
const products = JSON.parse(fs.readFileSync(productsPath, 'utf-8'));

// ุฃุณูุงุก ุนุฑุจูุฉ ูุชููุนุฉ
const arabicNames = [
  // ุฃุณูุงุก ุฎููุฌูุฉ
  'ูุญูุฏ ุงูุนุชูุจู', 'ูุงุทูุฉ ุงูุฒูุฑุงูู', 'ุฃุญูุฏ ุงูุณุงูู', 'ููุฑุง ุงููุญุทุงูู', 'ุฎุงูุฏ ุงููุทูุฑู',
  'ุณุงุฑุฉ ุงูุฏูุณุฑู', 'ุนุจุฏุงููู ุงูุดูุฑู', 'ูุฑูู ุงูุญุฑุจู', 'ุณูุทุงู ุงููุงููู', 'ุฑูู ุงูุบุงูุฏู',
  'ููุฏ ุงูุนูุฒู', 'ููุฏ ุงูุฑุงุดุฏ', 'ุนุจุฏุงูุฑุญูู ุงูููุตู', 'ูุทููุฉ ุงูุณุฏูุฑู', 'ุจูุฏุฑ ุงูุฎุงูุฏ',
  
  // ุฃุณูุงุก ุฃุฑุฏููุฉ
  'ุนูู ุงูุฃุฑุฏูู', 'ุฑุดุง ูุญููุฏ', 'ุนูุฑ ุงูุฒุนุจู', 'ุฏูุงูุง ุงูุนูุฑู', 'ูุญููุฏ ุงูุทุฑุงููุฉ',
  'ุณููู ุงูุฎูุฑู', 'ุฃุญูุฏ ุงูุดุฑูู', 'ูููุง ุงูุญุฏุงุฏ', 'ููุณู ุงููุงุณู', 'ุฑูุง ุงูุนุจุฏุงููู',
  
  // ุฃุณูุงุก ูุตุฑูุฉ
  'ูุงุณููู ุฃุญูุฏ', 'ูุฑูู ูุญูุฏ', 'ุญุณุงู ุนูู', 'ุฏููุง ุญุณู', 'ูุฑูู ุนุจุฏุงููู',
  'ูุงุฏูุฉ ุฅุจุฑุงููู', 'ุทุงุฑู ูุญููุฏ', 'ุณูุฑ ุนุจุฏุงูุฑุญูู', 'ุฃููุฑ ุตูุงุญ', 'ูุจุฉ ุนุซูุงู',
  
  // ุฃุณูุงุก ูุบุฑุจูุฉ
  'ุนุจุฏุงูุฑุญูู ุงููุบุฑุจู', 'ุฎุฏูุฌุฉ ุงูุญุณูู', 'ููุณู ุงูุจุฑูุงูู', 'ูุงุทูุฉ ุงูุฒูุฑุงุก', 'ุนูุฑ ุงูุฅุฏุฑูุณู',
  
  // ุฃุณูุงุก ุนุฑุงููุฉ
  'ุญูุฏุฑ ุงูุนุฑุงูู', 'ุฒููุจ ุงูุญุณููู', 'ูุตุทูู ุงูุจุบุฏุงุฏู', 'ููุฑ ุงููุฏู', 'ุนูู ุงููุฑุจูุงุฆู',
  
  // ุฃุณูุงุก ุดุงููุฉ
  'ุณุงูุฑ ุงูุดุงูู', 'ูุงุฑุง ุงูุญูุจู', 'ุจุงุณู ุงูุฏูุดูู', 'ุฑููุง ุงููุจูุงููุฉ', 'ูุงุฏุฑ ุงูุญููู'
];

// ุชุนูููุงุช ูุงูุนูุฉ ุญุณุจ ููุน ุงูููุชุฌ
const reviewTemplates = {
  ebooks: {
    positive: [
      'ูุชุงุจ ูููุฏ ุฌุฏุงู ููููุก ุจุงููุนูููุงุช ุงููููุฉ',
      'ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐุง ุงููุชุงุจุ ููุตุญ ุจู ุจุดุฏุฉ',
      'ูุญุชูู ููุชุงุฒ ูุฃุณููุจ ุณูู ูู ุงูุดุฑุญ',
      'ูุชุงุจ ุฑุงุฆุน ูุณุชุญู ุงููุฑุงุกุฉ',
      'ูุนูููุงุช ูููุฉ ููููุฏุฉ ููุบุงูุฉ',
      'ุดุฑุญ ูุงุถุญ ูููุตูุ ุฃูุตุญ ุจูุฑุงุกุชู',
      'ูุชุงุจ ูุบุทู ุงูููุถูุน ุจุดูู ุดุงูู',
      'ุงุณุชุทุนุช ุชุทุจูู ูุง ุชุนููุชู ูู ุงููุชุงุจ ุจุณูููุฉ',
      'ูุญุชูู ุนููู ููููุฏ ุฌุฏุงู',
      'ูุชุงุจ ูุณุชุญู ุฃูุซุฑ ูู 5 ูุฌูู',
      'ุฏููู ุดุงูู ููููุฏ ูููุจุชุฏุฆูู',
      'ูุชุงุจ ูููุฑ ุงููุซูุฑ ูู ุงูููุช ูุงูุฌูุฏ',
      'ูุนูููุงุช ุญุฏูุซุฉ ูููุงูุจุฉ ููุนุตุฑ',
      'ุฃุณููุจ ุดุฑุญ ุจุณูุท ูููููู',
      'ูุชุงุจ ุนููู ูููู ุชุทุจููู ููุฑุงู'
    ],
    neutral: [
      'ูุชุงุจ ุฌูุฏ ุจุดูู ุนุงู',
      'ูุญุชูู ูููุฏ ููู ูุญุชุงุฌ ุงููุฒูุฏ ูู ุงูุชูุงุตูู',
      'ูุชุงุจ ูุง ุจุฃุณ ุจู',
      'ูุนูููุงุช ูููุฏุฉ ููู ููุณุช ุฌุฏูุฏุฉ',
      'ุฌูุฏ ูููุจุชุฏุฆูู',
      'ูุชุงุจ ุฃุณุงุณู ูู ุงูููุถูุน',
      'ูุญุชูู ููุงุณุจ ูููุณุชูู ุงููุชูุณุท'
    ],
    negative: [
      'ูุงู ูููู ุฃู ูููู ุฃูุถู',
      'ูุญุชูู ุฃุณุงุณู ุฌุฏุงู',
      'ุชููุนุช ูุนูููุงุช ุฃูุซุฑ ุชูุตููุงู',
      'ูุญุชุงุฌ ุงููุฒูุฏ ูู ุงูุฃูุซูุฉ ุงูุนูููุฉ'
    ]
  },
  courses: {
    positive: [
      'ุฏูุฑุฉ ููุชุงุฒุฉ ูุดุฑุญ ูุงุถุญ ุฌุฏุงู',
      'ุงุณุชูุฏุช ูุซูุฑุงู ูู ูุฐู ุงูุฏูุฑุฉ',
      'ูุญุชูู ุนููู ููููุฏ ููุบุงูุฉ',
      'ุฏูุฑุฉ ุชุณุชุญู ูู ุฑูุงู ุฏูุนุชู ูููุง',
      'ุดุฑุญ ูุจุณุท ูุณูู ุงูููู',
      'ุฏูุฑุฉ ุดุงููุฉ ูุชุบุทู ุฌููุน ุงูุฌูุงูุจ',
      'ุงููุฏุฑุจ ูุญุชุฑู ููุดุฑุญ ุจุทุฑููุฉ ููุชุงุฒุฉ',
      'ุชุทุจูู ุนููู ุฑุงุฆุน ููููุงููู',
      'ุฏูุฑุฉ ุชููู ุงูุชููุนุงุช',
      'ุฃูุตุญ ุจูุง ูู ูู ูุฑูุฏ ุชุนูู ูุฐุง ุงููุฌุงู'
    ],
    neutral: [
      'ุฏูุฑุฉ ุฌูุฏุฉ ุจุดูู ุนุงู',
      'ูุญุชูู ูููุฏ ููู ูุญุชุงุฌ ุชุญุฏูุซ',
      'ุฏูุฑุฉ ูุง ุจุฃุณ ุจูุง ูููุจุชุฏุฆูู',
      'ุดุฑุญ ูุงุถุญ ููู ุณุฑูุน ููููุงู'
    ],
    negative: [
      'ุชููุนุช ูุญุชูู ุฃูุซุฑ ุชูุตููุงู',
      'ุงูุฏูุฑุฉ ุฃุณุงุณูุฉ ุฌุฏุงู',
      'ูุญุชุงุฌ ุงููุฒูุฏ ูู ุงูุฃูุซูุฉ ุงูุนูููุฉ'
    ]
  },
  tools: {
    positive: [
      'ุฃุฏุงุฉ ุฑุงุฆุนุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู',
      'ููุฑุช ุนูู ุงููุซูุฑ ูู ุงูููุช ูุงูุฌูุฏ',
      'ุฃุฏุงุฉ ุงุญุชุฑุงููุฉ ูุชุณุชุญู ุงูุดุฑุงุก',
      'ุชุตููู ููุชุงุฒ ููุงุฌูุฉ ุณููุฉ',
      'ุฃุฏุงุฉ ูุนุงูุฉ ุฌุฏุงู ูู ุนููู',
      'ุชุทุจูู ููุชุงุฒ ููููุฏ',
      'ุฃุฏุงุฉ ุชุณุชุญู ูู ุฑูุงู',
      'ุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู ููุชุงุฆุฌ ููุชุงุฒุฉ',
      'ุฃุฏุงุฉ ูุง ุบูู ุนููุง',
      'ุชุญุณูุช ุฅูุชุงุฌูุชู ุจุดูู ูุจูุฑ'
    ],
    neutral: [
      'ุฃุฏุงุฉ ุฌูุฏุฉ ุจุดูู ุนุงู',
      'ุชุคุฏู ุงูุบุฑุถ ุงููุทููุจ',
      'ุฃุฏุงุฉ ูุง ุจุฃุณ ุจูุง',
      'ูููุฏุฉ ููู ุชุญุชุงุฌ ุชุญุณููุงุช'
    ],
    negative: [
      'ูุงุฌูุฉ ูุนูุฏุฉ ููููุงู',
      'ุชุญุชุงุฌ ุงููุฒูุฏ ูู ุงูููุฒุงุช',
      'ุชููุนุช ุฃุฏุงุก ุฃูุถู'
    ]
  }
};

// ูููุงุช ุจุณูุทุฉ ููุชููููุงุช ุงููุตูุฉ
const simpleWords = [
  'ููุชุงุฒ', 'ุฑุงุฆุน', 'ุฌูุฏ ุฌุฏุงู', 'ูููุฏ', 'ุฑุงุฆุน ุฌุฏุงู', 'ููุชุงุฒ ุฌุฏุงู',
  'ุฌููู', 'ูุฐูู', 'ููู', 'ูููุฏ ุฌุฏุงู', 'ุงุญุชุฑุงูู', 'ูุชููุฒ',
  'ุฌูุฏ', 'ูุง ุจุฃุณ ุจู', 'ููุจูู', 'ุนุงุฏู'
];

// ุนุฏุฏ ุงูุชููููุงุช ุงููุทููุจ ููู ููุชุฌ (ููุณ ุงูุฃุนุฏุงุฏ ุงูููุฌูุฏุฉ)
const reviewCounts = {
  1: 127,
  2: 89,
  3: 156,
  4: 73,
  5: 198,
  6: 45
};

// ุฏุงูุฉ ูุชูููุฏ ุชูููู ูุงูุนู
function generateRealisticReview(product, reviewId) {
  const name = arabicNames[Math.floor(Math.random() * arabicNames.length)];
  const avatarNum = Math.floor(Math.random() * 100) + 1;
  const avatar = `/images/avatars/avatar-${avatarNum}.jpg`;
  
  // ุชุญุฏูุฏ ููุน ุงูุชูููู ุจูุงุกู ุนูู ุงุญุชูุงูุงุช ูุงูุนูุฉ
  const rand = Math.random();
  let type, rating, comment = '';
  
  if (rand < 0.4) {
    // 40% ุชููููุงุช ูุงููุฉ
    type = 'full';
    rating = Math.random() < 0.8 ? (Math.random() < 0.6 ? 5 : 4) : (Math.random() < 0.7 ? 3 : (Math.random() < 0.8 ? 2 : 1));
    
    // ุงุฎุชูุงุฑ ุชุนููู ููุงุณุจ ุญุณุจ ุงููุฆุฉ ูุงูุชูููู
    const category = product.category === 'ebooks' ? 'ebooks' : 
                    product.category === 'courses' ? 'courses' : 'tools';
    
    const templates = reviewTemplates[category];
    if (rating >= 4) {
      comment = templates.positive[Math.floor(Math.random() * templates.positive.length)];
    } else if (rating === 3) {
      comment = templates.neutral[Math.floor(Math.random() * templates.neutral.length)];
    } else {
      comment = templates.negative[Math.floor(Math.random() * templates.negative.length)];
    }
  } else if (rand < 0.7) {
    // 30% ุชููููุงุช ูุตูุฉ ุจุณูุทุฉ
    type = 'simple_text';
    rating = Math.random() < 0.85 ? (Math.random() < 0.7 ? 5 : 4) : 3;
    comment = simpleWords[Math.floor(Math.random() * simpleWords.length)];
  } else {
    // 30% ุชููููุงุช ูุฌูู ููุท
    type = 'stars_only';
    rating = Math.random() < 0.9 ? (Math.random() < 0.8 ? 5 : 4) : 3;
    comment = '';
  }
  
  return {
    id: reviewId,
    customerName: name,
    rating,
    comment,
    avatar,
    type
  };
}

// ุชูููุฏ ุงูุชููููุงุช ูุฌููุน ุงูููุชุฌุงุช
const allReviews = {};

products.forEach(product => {
  const productId = product.product_id;
  const count = reviewCounts[productId] || 50; // ุงูุชุฑุงุถู 50 ุชูููู
  
  allReviews[productId] = [];
  
  for (let i = 1; i <= count; i++) {
    const review = generateRealisticReview(product, i);
    allReviews[productId].push(review);
  }
  
  console.log(`โ ุชู ุชูููุฏ ${count} ุชูููู ููููุชุฌ: ${product.product_name}`);
});

// ุญูุธ ุงูุชููููุงุช ูู ุงูููู
const outputPath = path.join(__dirname, '../data/product-reviews.json');
fs.writeFileSync(outputPath, JSON.stringify(allReviews, null, 2), 'utf-8');

console.log('\n๐ ุชู ุชูููุฏ ุฌููุน ุงูุชููููุงุช ุจูุฌุงุญ!');
console.log(`๐ ุงูููู ูุญููุธ ูู: ${outputPath}`);

// ุฅุญุตุงุฆูุงุช
let totalReviews = 0;
Object.values(allReviews).forEach(reviews => {
  totalReviews += reviews.length;
});

console.log(`๐ ุฅุฌูุงูู ุงูุชููููุงุช: ${totalReviews}`);
console.log('๐ ุชูุฒูุน ุงูุชููููุงุช ุญุณุจ ุงูููุชุฌ:');
Object.keys(allReviews).forEach(productId => {
  const product = products.find(p => p.product_id == productId);
  console.log(`   - ${product.product_name}: ${allReviews[productId].length} ุชูููู`);
});
