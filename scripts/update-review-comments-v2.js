const fs = require('fs');
const path = require('path');

// Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
const reviewsPath = path.join(__dirname, '../public/product-reviews.json');
const reviewsData = JSON.parse(fs.readFileSync(reviewsPath, 'utf8'));

// Ù†ØµÙˆØµ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø© ÙˆØ§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©
const realisticComments = {
  // ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ (2-4 ÙƒÙ„Ù…Ø§Øª)
  short: [
    // Ø®Ù„ÙŠØ¬ÙŠØ©
    "Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ù‹Ø§",
    "Ø®Ø¯Ù…Ø© Ø±Ù‡ÙŠØ¨Ø©", 
    "Ù…Ø±ØªØ¨ ÙˆÙ…ÙÙŠØ¯",
    "Ø­Ù„Ùˆ Ø¬Ø¯Ø§Ù‹",
    "ÙŠØ³ØªØ­Ù‚ Ø§Ù„Ø«Ù…Ù†",
    "Ø´ØºÙ„ Ù†Ø¸ÙŠÙ",
    "Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡",
    "ÙÙˆÙ‚ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª",
    "Ø§Ø³ØªÙØ¯Øª ÙƒØ«ÙŠØ±",
    "Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©",
    
    // Ø£Ø±Ø¯Ù†ÙŠØ©
    "Ø¥Ø´ÙŠ Ù…Ø±ØªÙ‘Ø¨",
    "Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©", 
    "Ø´ØºÙ„ Ù†Ø¸ÙŠÙ",
    "Ø¨Ø¬Ù†Ù† Ø¬Ø¯Ø§Ù‹",
    "ÙƒØªÙŠØ± Ø­Ù„Ùˆ",
    "Ø¥Ø´ÙŠ Ø±Ø§Ø¦Ø¹",
    "Ø¨Ø³ØªØ§Ù‡Ù„ Ø§Ù„ÙÙ„ÙˆØ³",
    "Ø´ØºÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ",
    "ÙƒØªÙŠØ± Ù…ÙÙŠØ¯",
    "ØªØ³Ù„Ù… Ø¥ÙŠØ¯Ùƒ",
    
    // Ù…ØµØ±ÙŠØ©
    "Ø¬Ø§Ù…Ø¯ Ø¬Ø¯Ù‹Ø§",
    "Ø­Ù„Ùˆ Ø£ÙˆÙŠ", 
    "Ù…Ø¸Ø¨ÙˆØ· Ø£ÙˆÙŠ",
    "ØªØ­ÙØ©",
    "Ø¹Ø³Ù„ Ø¬Ø¯Ø§Ù‹",
    "Ø±ÙˆØ¹Ø© Ø¨Ø¬Ø¯",
    "ÙÙˆÙ‚ Ø§Ù„Ù…Ù…ØªØ§Ø²",
    "Ø´ØºÙ„ Ù…Ø­ØªØ±Ù…",
    "ÙŠØ³ØªØ§Ù‡Ù„ ÙØ¹Ù„Ø§Ù‹",
    "Ø¨Ø¬Ø¯ Ø±Ø§Ø¦Ø¹"
  ],
  
  // ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ØªÙˆØ³Ø·Ø© (Ø³Ø·Ø± Ø£Ùˆ Ø³Ø·Ø±ÙŠÙ†)
  medium: [
    "Ø§Ù„Ø­Ø²Ù…Ø© ÙØ¹Ù„Ø§Ù‹ Ø³Ø§Ø¹Ø¯ØªÙ†ÙŠ Ø£Ø±ØªÙ‘Ø¨ Ø´ØºÙ„ÙŠ ÙÙŠ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ£ÙˆÙØ± ÙˆÙ‚Øª ÙƒØªÙŠØ±.",
    "Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ø®Ø·ÙˆØ· Ù…ØªÙ†ÙˆØ¹Ø© Ø¬Ø¯Ù‹Ø§ ÙˆØ§Ø´ØªØºÙ„Øª Ù…Ø¹ÙŠ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„.",
    "Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù†Ø¸Ù…Ø© ØªÙ…Ø§Ù…Ø§Ù‹ ÙˆØ³Ù‡Ù„ Ø£Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ÙŠ.",
    "ÙˆÙÙ‘Ø±Øª Ø§Ù„ÙˆÙ‚Øª ÙƒØªÙŠØ± Ø¨Ø¯Ù„ Ù…Ø§ Ø£Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ®Ø·ÙˆØ· Ù…Ù†ÙØµÙ„Ø©.",
    "Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù„ÙØ§Øª Ø¹Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ… Ù…Ù…ØªØ§Ø²ØŒ Ø¨Ù†ØµØ­ ÙÙŠÙ‡Ø§ Ø¨Ù‚ÙˆØ©.",
    "Ø§Ø³ØªØ®Ø¯Ù…ØªÙ‡Ø§ ÙÙŠ Ø¹Ø¯Ø© Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØ§Ù†Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¬Ø¯Ø§Ù‹.",
    "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø´Ø§Ù…Ù„Ø© ÙˆÙÙŠÙ‡Ø§ ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ù…Ø­ØªØ§Ø¬Ù‡ Ù„Ù„ØªØµÙ…ÙŠÙ….",
    "Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø´ÙŠØ¡ Ø±Ø§Ø¦Ø¹.",
    "Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© ÙˆØ§Ø¶Ø­Ø© ÙˆØ¬ÙˆØ¯ØªÙ‡Ø§ Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹.",
    "Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª Ø³Ù„Ø³Ø© ÙˆØªØ¹Ø·ÙŠ Ù„Ù…Ø³Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„ÙÙŠØ¯ÙŠÙˆ.",
    "Ø§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¬Ù…ÙŠÙ„Ø© ÙˆØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠ.",
    "Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ØªØ¶ÙŠÙ Ø­ÙŠÙˆÙŠØ© Ù„Ù„ØªØµÙ…ÙŠÙ….",
    "Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø³Ø±ÙŠØ¹ ÙˆØ§Ù„Ù…Ù„ÙØ§Øª Ù…Ø±ØªØ¨Ø© ÙÙŠ Ù…Ø¬Ù„Ø¯Ø§Øª ÙˆØ§Ø¶Ø­Ø©.",
    "Ø§Ø³ØªÙØ¯Øª Ù…Ù†Ù‡Ø§ ÙÙŠ ØªØ·ÙˆÙŠØ± Ù‚Ù†Ø§ØªÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨.",
    "Ø§Ù„Ø¨Ø§Ù‚Ø© ØªØ³ØªØ­Ù‚ Ø§Ù„Ø³Ø¹Ø± ÙˆØ£ÙƒØ«Ø±ØŒ Ø¬ÙˆØ¯Ø© Ù…Ù…ØªØ§Ø²Ø©.",
    "Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ø¨ØµØ±ÙŠØ© ØªØ¹Ø·ÙŠ Ø·Ø§Ø¨Ø¹ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ù…ÙˆÙ†ØªØ§Ø¬.",
    "Ø³Ù‡Ù‘Ù„Øª Ø¹Ù„ÙŠÙ‘ ÙƒØªÙŠØ± ÙÙŠ Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨ÙˆÙ‚Øª Ø£Ù‚Ù„.",
    "Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙŠØºØ·ÙŠ ÙƒÙ„ Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª.",
    "Ø§Ù„Ù…Ù„ÙØ§Øª ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„.",
    "Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù…ØªØ§Ø²Ø© ÙˆØ§Ù„Ø±Ø¯ Ø³Ø±ÙŠØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª."
  ]
};

// Ø¯Ø§Ù„Ø© Ù„Ø§Ø®ØªÙŠØ§Ø± ØªØ¹Ù„ÙŠÙ‚ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
function getRandomComment(type) {
  const comments = realisticComments[type];
  return comments[Math.floor(Math.random() * comments.length)];
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
let updatedCount = 0;
const updatedReviewsData = {};

// Ù…Ø¹Ø§Ù„Ø¬Ø© ÙƒÙ„ Ù…Ù†ØªØ¬
Object.keys(reviewsData).forEach(productId => {
  const productReviews = reviewsData[productId];
  
  updatedReviewsData[productId] = productReviews.map(review => {
    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ‚ ØºÙŠØ± ÙˆØ§Ù‚Ø¹ÙŠØŒ Ù†Ø­Ø¯Ø«Ù‡
    if (review.comment && (
      review.comment.includes('Ù…Ø«Ù„ Ø§Ù„Ø¹Ø³Ù„') ||
      review.comment.includes('ÙƒØ«ÙŠØ± Ù…ÙÙŠØ¯') ||
      review.comment.length < 10 ||
      review.comment.length > 150
    )) {
      updatedCount++;
      
      // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ©
      const rand = Math.random();
      let newComment = '';
      
      if (rand < 0.3) {
        // 30% ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¨Ù†Ø¬ÙˆÙ… ÙÙ‚Ø·
        newComment = '';
        review.type = 'stars_only';
      } else if (rand < 0.7) {
        // 40% ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù‚ØµÙŠØ±Ø©
        newComment = getRandomComment('short');
        review.type = 'short';
      } else {
        // 30% ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ØªÙˆØ³Ø·Ø©
        newComment = getRandomComment('medium');
        review.type = 'medium';
      }
      
      return {
        ...review,
        comment: newComment
      };
    }
    
    return review;
  });
});

// Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ø¯Ø«
fs.writeFileSync(reviewsPath, JSON.stringify(updatedReviewsData, null, 2), 'utf8');

console.log(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ${updatedCount} ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†ØµÙˆØµ ÙˆØ§Ù‚Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©`);

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
let totalReviews = 0;
let starsOnly = 0;
let shortComments = 0;
let mediumComments = 0;

Object.keys(updatedReviewsData).forEach(productId => {
  const productReviews = updatedReviewsData[productId];
  totalReviews += productReviews.length;
  
  productReviews.forEach(review => {
    if (review.type === 'stars_only' || !review.comment) {
      starsOnly++;
    } else if (review.type === 'short' && review.comment) {
      shortComments++;
    } else if (review.type === 'medium' && review.comment) {
      mediumComments++;
    }
  });
});

console.log(`ğŸ“Š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª: ${totalReviews}`);
console.log(`â­ Ù†Ø¬ÙˆÙ… ÙÙ‚Ø·: ${starsOnly}`);
console.log(`ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù‚ØµÙŠØ±Ø©: ${shortComments}`);
console.log(`ğŸ“ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ØªÙˆØ³Ø·Ø©: ${mediumComments}`);
